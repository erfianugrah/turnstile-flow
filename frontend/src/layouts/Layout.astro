---
import '../styles/global.css';

interface Props {
	title: string;
	description?: string;
}

const { title, description = 'Forminator - I\'m collecting all your data' } = Astro.props;
---

<!doctype html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="description" content={description} />
		<meta name="viewport" content="width=device-width" />
		<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
		<link rel="preconnect" href="https://challenges.cloudflare.com" />
		<meta name="generator" content={Astro.generator} />
		<title>{title}</title>
		<script is:inline>
			// Dark mode initialization (runs before page render to prevent flash)
			const savedTheme = localStorage.getItem('theme');
			const systemTheme = window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';
			const theme = savedTheme || systemTheme;

			if (theme === 'dark') {
				document.documentElement.classList.add('dark');
			} else {
				document.documentElement.classList.remove('dark');
			}

			// Suppress harmless Feature Policy warnings from Cloudflare Turnstile
			// These are deprecated warnings from Turnstile's iframe that can't be fixed on our end
			const originalWarn = console.warn;
			console.warn = function(...args) {
				const message = args[0];
				if (typeof message === 'string' &&
					(message.includes('Feature Policy') ||
					 message.includes('Partitioned cookie or storage access'))) {
					return; // Suppress these specific warnings
				}
				originalWarn.apply(console, args);
			};
		</script>
	</head>
	<body class="min-h-screen">
		<slot />
	</body>
</html>
